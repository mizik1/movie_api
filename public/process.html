<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Process Document</title>
  </head>

  <body>
    <h2>
      app.get(&quot;/movies&quot;, async (req, res) =&gt; { try { const movies = await Movies.find();
      res.status(200).json(movies); } catch (error) { console.error(error); res.status(500).send(&quot;Error: &quot; + error); }
      })
    </h2>
    <p>
      This piece of code returns an endpoint in Express.js that handles GET requests <br />
      1 - The endpoint is defined - app.get("./movies") <br />
      2 - The callback function - uses 'async (req,res)' and allows 'await' to be used within it.
    </p>
    <ul>
      <li>'req' - The request object has information about the HTTP request.</li>
      <li>'res' - The response object is used to send a response back to the user</li>
    </ul>
    <p>3 - The 'try' is used in case there is an error . If an error occurs, it is passed to 'catch'</p>
    <p>4 - Fetch movies from the database - 'const movies = await Movies.find()'';</p>
    <ul>
      <li>'await Movies.find()' - This line uses Mongoose to get all documents from the 'Movies' collection made in MongoDb</li>
      <li>"await' pauses the execution of the function until the promise is returned by 'Movies.find()' is resolved.</li>
      <li>'Movies.find()' - This Mongoose method retrieves all documents in the 'Movies' series.</li>
    </ul>
    <p>5 - Send the retrieved movies as a JSON response</p>
    <ul>
      <li>'res.status(200)' - The HTTP status code 200 indicates a success.</li>
      <li>'.json(movies) - Sends the retrieved movies as a JSON response to the user</li>
    </ul>
  </body>
</html>
